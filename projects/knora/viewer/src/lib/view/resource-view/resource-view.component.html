<div class="resource-view">

    <kui-progress-indicator *ngIf="loading"></kui-progress-indicator>

    <div *ngIf="!loading">

        <div class="resource" *ngFor="let resource of sequence.resources; let last = last">

            <!-- 0) Title first? -->
            <mat-list>

                <h3 class="mat-subheader">
                    {{sequence.ontologyInformation.getLabelForResourceClass(resource.type)}}
                </h3>

                <mat-list-item>
                    <h2 class="mat-headline">{{resource.label}}</h2>
                </mat-list-item>

            </mat-list>

            <!-- 1) show fileRepresentation first-->
            <div *ngFor="let prop of resource.properties | kuiKey">
                <div [ngSwitch]="prop.key">

                    <div *ngSwitchCase="KnoraConstants.hasStillImageFileValue" class="media">
                        <!-- if the property is of type stillImageFileValue, show the image with osd viewer from @knora/viewer TODO: the fileValue will be part of an own resource property -->
                        <kui-still-image *ngIf="resource.stillImageRepresentationsToDisplay.length > 0" class="osd-viewer" [imageCaption]="sequence.ontologyInformation.getLabelForProperty(prop.key)" [images]="resource.stillImageRepresentationsToDisplay">
                        </kui-still-image>
                    </div>

                    <div *ngSwitchCase="KnoraConstants.hasMovingImageFileValue" class="media">
                        <kui-moving-image></kui-moving-image>
                    </div>

                    <!-- TODO: switch through all other media type -->
                    <!--
                    <kui-moving-image></kui-moving-image>
                    <kui-audio></kui-audio>
                    <kui-ddd></kui-ddd>
                    <kui-document></kui-document>

                    <kui-collection></kui-collection>

                    <kui-annotation></kui-annotation>
                    <kui-link-obj></kui-link-obj>
                    <kui-object></kui-object>
                    <kui-region></kui-region>
                    <kui-text></kui-text>
                    -->

                    <div *ngSwitchDefault class="hidden">
                        <!--<p>This media type ({{prop.key}}) is not yet implemented</p>-->
                    </div>
                </div>
            </div>

            <!-- 2) show properties, annotations (list of regions, sequences etc.), incomming resources (links, files) -->
            <div class="data">
                <kui-properties-view [properties]="resource.properties" [guiOrder]="guiOrder" [ontologyInfo]="ontologyInfo" [incomingLinks]="resource.incomingLinks">
                </kui-properties-view>
            </div>

            <!-- in case of more than one resource -->
            <mat-divider *ngIf="!last"></mat-divider>

        </div>

    </div>
</div>
