<div class="login-container" *ngIf="!loggedInUser">

    <h2 class="login-form-title mat-title">{{formLabel.title}}</h2>

    <!-- This is the login form -->
    <form [formGroup]="form" (ngSubmit)="login()" class="login-form">

        <!-- Username -->
        <mat-form-field class="full-width login-field">
            <!-- <mat-icon matPrefix>person</mat-icon> -->

            <input matInput autofocus [placeholder]="formLabel.name" autocomplete="username" formControlName="username"
                   #username cdkFocusInitial>

            <!-- <mat-hint *ngIf="formErrors.username">
                {{ formErrors.username }}
            </mat-hint> -->
        </mat-form-field>

        <!-- Password -->
        <mat-form-field class="full-width login-field">

            <!-- <mat-icon matPrefix>lock</mat-icon> -->

            <input matInput type="password" [placeholder]="formLabel.pw" autocomplete="current-password"
                   formControlName="password">

            <!-- <mat-hint *ngIf="formErrors.password" class="login-error">{{formLabel.error.failed}}</mat-hint> -->
        </mat-form-field>

        <br>
        <!-- Button: Login -->

        <!-- <div class="button-row full-width"> -->
        <button mat-raised-button type="submit" [disabled]="!form.valid" class="full-width submit-button"
                [class.mat-primary]="!errorMessage" [class.mat-warn]="errorMessage">
            <kui-progress-indicator [color]="'white'" [status]="0" *ngIf="loading" class="login-progress">
            </kui-progress-indicator>
            <mat-icon *ngIf="errorMessage && !loading">close</mat-icon>
            {{errorMessage ? formLabel.retry : formLabel.submit}}
        </button>
        <!-- <kui-progress-indicator *ngIf="loading" [color]="color"></kui-progress-indicator> -->
        <!-- </div> -->

        <br><br>

        <!-- Error message as an answer from knora api request -->
        <p class="full-width login-error" *ngIf="errorMessage">
            {{loginErrorServer ? formLabel.error.server : formLabel.error.failed}}
        </p>
    </form>
</div>


<!-- a user is already logged in; show who it is and a logout button -->

<div class="logout-container" *ngIf="loggedInUser">
    <p>A user is already logged in:</p>
    <p>{{loggedInUser}}</p>
    <br>
    <p>If it's not you, please logout!</p>
    <div class="button-row full-width">
        <button mat-raised-button (click)="logout()" class="full-width mat-warn">
            <kui-progress-indicator [color]="'white'" [status]="0" *ngIf="loading" class="login-progress">
            </kui-progress-indicator>
            {{formLabel.logout}}
        </button>
    </div>
</div>
